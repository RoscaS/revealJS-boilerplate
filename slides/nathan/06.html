<section>
  <h3>Problématique (Référence <span class="orange">circulaire</span>)</h3>
  <ul>
    <li class="fragment">Classe <span class="inline">Etudiant</span></li>
    <li class="fragment">
      <span class="inline">Attribut shared_ptr&lt;Etudiant&gt; (binôme)</span>
    </li>
    <li class="fragment">Destruction</li>
  </ul>
</section>
<section>
  <h3>Problématique (Référence <span class="orange">circulaire</span>)</h3>
  <pre class="fragment" class="cpp">
    <code lang="cpp" data-trim data-noescape data-line-numbers>
        class Etudiant
        {
        public:
          Etudiant(const std::string& nom) : nom_(nom){}
          ~Etudiant() {}

          void creerBinome(std::shared_ptr&lt;Etudiant&gt; & binome) {
            this->binome_ = binome;
          }

        private:
          std::string nom_;
          std::shared_ptr&lt;Etudiant&gt; binome_;
        };
    </code>
</pre>

  <pre class="fragment" class="cpp">
        <code lang="cpp" data-trim data-noescape data-line-numbers>
            int main()
            {
              std::shared_ptr&lt;Etudiant&gt; etudiant1(new Etudiant("Marc"));
              std::shared_ptr&lt;Etudiant&gt; etudiant2(new Etudiant("Lionel"));

              etudiant1->creerBinome(etudiant2);
              etudiant2->creerBinome(etudiant1);
            }
        </code>
    </pre>
</section>
<section>
  <h3>Problématique (Référence <span class="orange">circulaire</span>)</h3>
  <image
    class="fragment"
    width="400"
    src="./resources/Shared-Pointer1.png"
  ></image>
  <image
    class="fragment"
    width="400"
    src="./resources/Weak-Pointer1.png"
  ></image>
</section>
<section>
  <h3>Solution (Référence <span class="orange">circulaire</span>)</h3>
  <div class="fragment">
    <pre class="cpp" class="fragment">
        <code lang="cpp" data-trim data-noescape data-line-numbers>
            class Etudiant
            {
            public:
              Etudiant(const std::string& nom) : nom_(nom){}
              ~Etudiant() {}

              void creerBinome(std::weak_ptr&lt;Etudiant&gt; & binome) {
                this->binome_ = binome;
              }

            private:
              std::string nom_;
              std::weak_ptr&lt;Etudiant&gt; binome_;
            };
        </code>
    </pre>
  </div>

  <br />

  <ul>
    <li class="fragment">
      Utiliser <span class="inline">weak_ptr</span> dans la classe au lieu du
      <span class="inline">shared_ptr</span>
    </li>
    <li class="fragment">
      le <span class="inline">weak_ptr</span> n'est pas incrémenté dans le
      <span class="inline">shared_ptr</span>
    </li>
  </ul>
</section>
